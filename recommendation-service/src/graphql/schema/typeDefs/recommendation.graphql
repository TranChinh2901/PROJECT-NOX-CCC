scalar DateTime
scalar JSON

enum RecommendationStrategy {
  COLLABORATIVE
  CONTENT_BASED
  HYBRID
}

enum InteractionType {
  VIEW
  CART
  PURCHASE
  RATING
  WISHLIST
}

type Product {
  id: ID!
  externalId: String!
  name: String!
  price: Float!
  category: Category
  brand: String
  tags: [String!]!
}

type ProductRecommendation {
  product: Product!
  score: Float!
  rank: Int!
}

type RecommendationResult {
  recommendations: [ProductRecommendation!]!
  strategy: RecommendationStrategy!
  fromCache: Boolean!
}

type Query {
  # Personalized recommendations
  recommendations(
    userId: ID!
    limit: Int = 10
    strategy: RecommendationStrategy = HYBRID
  ): RecommendationResult!

  # Similar products
  similarProducts(productId: ID!, limit: Int = 10): [ProductRecommendation!]!

  # Trending products
  trendingProducts(categoryId: ID, limit: Int = 10): [ProductRecommendation!]!

  # Health check
  health: HealthStatus!
}

type Mutation {
  # Record user interaction
  recordInteraction(
    userId: ID!
    productId: ID!
    interactionType: InteractionType!
    value: Float
  ): Boolean!

  # Sync product from external system
  syncProduct(externalId: String!, data: JSON!): Product!

  # Sync user from external system
  syncUser(externalId: String!): User!
}
